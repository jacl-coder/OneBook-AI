# OneBook AI — Requirements (High Level)

## 1. 范围
- 用户可上传自己的电子书，系统理解内容并提供对话式问答。
- 默认面向个人使用，保留管理员能力以便运营与排障。

## 2. 功能需求
- **上传书籍**：支持 PDF/EPUB/TXT；不支持格式需明确提示。
- **处理与状态**：上传后进入队列，展示 `queued/processing/ready/failed` 状态；失败需给出原因。
- **书库管理**：列出书籍及状态，支持下载与删除。
- **对话**：基于选书进行问答，回答附出处。
- **对话上下文**：保留最近若干轮历史，支持继续追问。
- **管理员能力**：查看用户/书籍列表，更新用户角色与状态。

## 3. 非功能需求（基线）
- **可用性**：常见大小书籍在可接受时间内完成处理。
- **性能**：对话与检索在用户可接受时间内响应。
- **可靠性**：队列任务可重试，失败状态可追踪。
- **隐私**：书籍与对话仅对上传者可见（管理员除外）。

## 4. MVP 不包含
- 复杂 OCR、公式/表格的高保真还原。
- 多人协作与权限层级。
- 计费与精细化配额系统。

## 5. 当前实现说明
- 处理流程使用 Redis Streams 持久队列，支持重试。
- 上传支持大小限制与扩展名白名单。
- 对话历史已保存并用于上下文拼接。
