# OneBook AI — Requirements (High Level)

## 1. Scope
- 任何用户可以上传自己拥有的书籍（电子版），系统理解内容并提供对话式学习与问答。
- 以单人使用为主（无复杂角色/权限）；后续可扩展多人共享。

## 2. Functional Requirements
- 上传书籍：支持常见电子书格式（PDF/EPUB/TXT）；若超出支持范围需明确提示。
- 处理与状态：上传后进入队列，显示处理状态（排队/处理中/可对话/失败），失败需给出原因和重试入口。
- 书本选择与管理：列出用户已上传书籍及状态；可删除书籍及其衍生数据。
- 对话：用户选择一本已处理完成的书进行问答；回答需基于该书内容生成，并附出处信息（章节/页码/段落摘要等，若有）。
- 对话上下文：同一会话保留最近若干轮对话历史，支持继续追问。
- 安全与合规提示：上传时提示需遵守版权与法律，用户对所上传内容负责。

## 3. Non-Functional Requirements (Baseline)
- 可用性：常见大小的书籍（如几十到数百页）处理在可接受时间内完成，并通过状态提示管理预期。
- 性能：普通对话在合理时间内返回（面向用户体验的目标，而非硬实时）。
- 可靠性：对于支持的格式和大小，处理成功率应高；故障路径可提示并支持重试。
- 隐私：用户上传的内容和对话仅对该用户可见，不对外共享。

## 4. Out of Scope (MVP)
- 自动出题、学习路径推荐、错题本等扩展学习功能。
- 深度处理复杂公式/表格/大量图片的高保真呈现。
- 多人协作与权限层级管理。

## 5. 当前实现说明
- 处理流程使用 Redis 持久队列，支持重试与失败恢复。
- 已提供基础上传大小限制与扩展名白名单；配额策略待细化。
- 对话历史已保存并用于生成上下文。
