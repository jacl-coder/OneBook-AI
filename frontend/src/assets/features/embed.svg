<svg width="600" height="571" viewBox="-45 -25 600 571" fill="none" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg">
  <rect x="1" y="1" width="507" height="474" rx="6" fill="#FFFFFF" stroke="#D7DBDE" filter="url(#windowShadow)"/>
  <circle cx="18" cy="19" r="6" fill="#FF5F57"/>
  <circle cx="36" cy="19" r="6" fill="#FEBB2E"/>
  <circle cx="54" cy="19" r="6" fill="#28C840"/>
  <text fill="#1F2328" xml:space="preserve" style="white-space: pre" font-family="Arial, sans-serif" font-size="12" font-weight="700" letter-spacing="0" text-anchor="middle">
    <tspan x="254.5" y="23.2">Embed</tspan>
  </text>

  <g transform="translate(3 3) scale(0.836)">
    <!-- Top bar -->
    <rect x="24" y="48" width="552" height="52" rx="8" fill="#F4F6F8" stroke="#E2E6EA"/>
    <text fill="#37424C" font-family="Arial, sans-serif" font-size="13" font-weight="600"><tspan x="40" y="78">Vector Embedding Pipeline</tspan></text>
    <text fill="#A0ABB5" font-family="Arial, sans-serif" font-size="10"><tspan x="420" y="78">model: text-embedding · dim: 768</tspan></text>

    <!-- Left: Chunk list -->
    <rect x="24" y="116" width="200" height="432" rx="8" fill="#FAFBFC" stroke="#E2E6EA"/>
    <text fill="#37424C" font-family="Arial, sans-serif" font-size="12" font-weight="600"><tspan x="40" y="142">Text Chunks</tspan></text>

    <rect x="36" y="156" width="176" height="48" rx="6" fill="#EEF5FB" stroke="#D7E5F2"/>
    <text fill="#344B5F" font-family="Arial, sans-serif" font-size="10" font-weight="600"><tspan x="48" y="174">"Feature selection is the…"</tspan></text>
    <text fill="#8FA4B8" font-family="Arial, sans-serif" font-size="9"><tspan x="48" y="192">Ch.3 §3.1 · 128 tokens</tspan></text>

    <rect x="36" y="212" width="176" height="48" rx="6" fill="#EEF8F2" stroke="#D6EBDC"/>
    <text fill="#355847" font-family="Arial, sans-serif" font-size="10" font-weight="600"><tspan x="48" y="230">"Normalization scales data…"</tspan></text>
    <text fill="#8FA4B8" font-family="Arial, sans-serif" font-size="9"><tspan x="48" y="248">Ch.3 §3.2 · 156 tokens</tspan></text>

    <rect x="36" y="268" width="176" height="48" rx="6" fill="#FFF7EE" stroke="#F0DFCB"/>
    <text fill="#66503A" font-family="Arial, sans-serif" font-size="10" font-weight="600"><tspan x="48" y="286">"PCA reduces the feature…"</tspan></text>
    <text fill="#8FA4B8" font-family="Arial, sans-serif" font-size="9"><tspan x="48" y="304">Ch.3 §3.2 · 142 tokens</tspan></text>

    <rect x="36" y="324" width="176" height="48" rx="6" fill="#F4F1FC" stroke="#E2DAF2"/>
    <text fill="#4A4366" font-family="Arial, sans-serif" font-size="10" font-weight="600"><tspan x="48" y="342">"Cross-validation ensures…"</tspan></text>
    <text fill="#8FA4B8" font-family="Arial, sans-serif" font-size="9"><tspan x="48" y="360">Ch.4 §4.1 · 118 tokens</tspan></text>

    <text fill="#A0ABB5" font-family="Arial, sans-serif" font-size="10" text-anchor="middle"><tspan x="124" y="400">· · ·</tspan></text>

    <!-- Middle arrows -->
    <g transform="translate(236, 240)">
      <line x1="0" y1="0" x2="30" y2="0" stroke="#A7B5C2" stroke-width="1.5" stroke-linecap="round"/>
      <polyline points="24,-4 30,0 24,4" fill="none" stroke="#A7B5C2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
    </g>
    <g transform="translate(236, 296)">
      <line x1="0" y1="0" x2="30" y2="0" stroke="#A7B5C2" stroke-width="1.5" stroke-linecap="round"/>
      <polyline points="24,-4 30,0 24,4" fill="none" stroke="#A7B5C2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
    </g>

    <!-- Center: Embedding model box -->
    <rect x="272" y="116" width="116" height="432" rx="8" fill="#F7FAFD" stroke="#DCE6EE"/>
    <text fill="#3A6B8C" font-family="Arial, sans-serif" font-size="11" font-weight="600" text-anchor="middle"><tspan x="330" y="142">Embedding</tspan></text>

    <!-- Neural network visualization -->
    <!-- Input layer -->
    <circle cx="304" cy="188" r="6" fill="#B8D4EC" stroke="#8BB5D8"/>
    <circle cx="304" cy="212" r="6" fill="#B8D4EC" stroke="#8BB5D8"/>
    <circle cx="304" cy="236" r="6" fill="#B8D4EC" stroke="#8BB5D8"/>
    <circle cx="304" cy="260" r="6" fill="#B8D4EC" stroke="#8BB5D8"/>
    <!-- Hidden layer -->
    <circle cx="330" cy="196" r="5" fill="#C4B5FD" stroke="#A78BFA"/>
    <circle cx="330" cy="220" r="5" fill="#C4B5FD" stroke="#A78BFA"/>
    <circle cx="330" cy="244" r="5" fill="#C4B5FD" stroke="#A78BFA"/>
    <!-- Output layer -->
    <circle cx="356" cy="205" r="6" fill="#86EFAC" stroke="#4ADE80"/>
    <circle cx="356" cy="230" r="6" fill="#86EFAC" stroke="#4ADE80"/>

    <!-- Connections -->
    <line x1="310" y1="188" x2="325" y2="196" stroke="#D1D5DB" stroke-width="0.6"/>
    <line x1="310" y1="188" x2="325" y2="220" stroke="#D1D5DB" stroke-width="0.6"/>
    <line x1="310" y1="212" x2="325" y2="196" stroke="#D1D5DB" stroke-width="0.6"/>
    <line x1="310" y1="212" x2="325" y2="220" stroke="#D1D5DB" stroke-width="0.6"/>
    <line x1="310" y1="236" x2="325" y2="220" stroke="#D1D5DB" stroke-width="0.6"/>
    <line x1="310" y1="236" x2="325" y2="244" stroke="#D1D5DB" stroke-width="0.6"/>
    <line x1="310" y1="260" x2="325" y2="244" stroke="#D1D5DB" stroke-width="0.6"/>
    <line x1="335" y1="196" x2="350" y2="205" stroke="#D1D5DB" stroke-width="0.6"/>
    <line x1="335" y1="220" x2="350" y2="205" stroke="#D1D5DB" stroke-width="0.6"/>
    <line x1="335" y1="220" x2="350" y2="230" stroke="#D1D5DB" stroke-width="0.6"/>
    <line x1="335" y1="244" x2="350" y2="230" stroke="#D1D5DB" stroke-width="0.6"/>

    <!-- Vector output notation -->
    <text fill="#5A6772" font-family="monospace" font-size="9" text-anchor="middle">
      <tspan x="330" y="296">[0.23, -0.41,</tspan>
      <tspan x="330" y="310"> 0.87, 0.15,</tspan>
      <tspan x="330" y="324"> -0.63, ...]</tspan>
    </text>
    <text fill="#A0ABB5" font-family="Arial, sans-serif" font-size="9" text-anchor="middle"><tspan x="330" y="350">768-dim vector</tspan></text>

    <!-- Right arrows -->
    <g transform="translate(394, 240)">
      <line x1="0" y1="0" x2="30" y2="0" stroke="#A7B5C2" stroke-width="1.5" stroke-linecap="round"/>
      <polyline points="24,-4 30,0 24,4" fill="none" stroke="#A7B5C2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
    </g>
    <g transform="translate(394, 296)">
      <line x1="0" y1="0" x2="30" y2="0" stroke="#A7B5C2" stroke-width="1.5" stroke-linecap="round"/>
      <polyline points="24,-4 30,0 24,4" fill="none" stroke="#A7B5C2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
    </g>

    <!-- Right: pgvector storage -->
    <rect x="430" y="116" width="146" height="432" rx="8" fill="#FAFBFC" stroke="#E2E6EA"/>
    <text fill="#37424C" font-family="Arial, sans-serif" font-size="12" font-weight="600"><tspan x="446" y="142">pgvector Store</tspan></text>

    <!-- Stored vectors as rows -->
    <rect x="442" y="156" width="122" height="36" rx="4" fill="#EEF5FB" stroke="#D7E5F2"/>
    <text fill="#3A6B8C" font-family="monospace" font-size="8"><tspan x="450" y="172">vec_001</tspan></text>
    <text fill="#8FA4B8" font-family="monospace" font-size="7"><tspan x="450" y="184">[0.23,-0.41,0.87..]</tspan></text>

    <rect x="442" y="198" width="122" height="36" rx="4" fill="#EEF8F2" stroke="#D6EBDC"/>
    <text fill="#3A6B4C" font-family="monospace" font-size="8"><tspan x="450" y="214">vec_002</tspan></text>
    <text fill="#8FA4B8" font-family="monospace" font-size="7"><tspan x="450" y="226">[-0.12,0.55,0.33..]</tspan></text>

    <rect x="442" y="240" width="122" height="36" rx="4" fill="#FFF7EE" stroke="#F0DFCB"/>
    <text fill="#7A6240" font-family="monospace" font-size="8"><tspan x="450" y="256">vec_003</tspan></text>
    <text fill="#8FA4B8" font-family="monospace" font-size="7"><tspan x="450" y="268">[0.91,-0.08,0.44..]</tspan></text>

    <rect x="442" y="282" width="122" height="36" rx="4" fill="#F4F1FC" stroke="#E2DAF2"/>
    <text fill="#4A4366" font-family="monospace" font-size="8"><tspan x="450" y="298">vec_004</tspan></text>
    <text fill="#8FA4B8" font-family="monospace" font-size="7"><tspan x="450" y="310">[0.67,0.22,-0.79..]</tspan></text>

    <text fill="#A0ABB5" font-family="Arial, sans-serif" font-size="10" text-anchor="middle"><tspan x="503" y="342">· · ·</tspan></text>

    <!-- Index info -->
    <rect x="442" y="366" width="122" height="48" rx="6" fill="#F4F6F8" stroke="#E2E6EA"/>
    <text fill="#5A6772" font-family="Arial, sans-serif" font-size="9"><tspan x="450" y="384">Index: ivfflat</tspan></text>
    <text fill="#5A6772" font-family="Arial, sans-serif" font-size="9"><tspan x="450" y="398">Metric: cosine</tspan></text>
    <text fill="#5A6772" font-family="Arial, sans-serif" font-size="9"><tspan x="450" y="412">Lists: 100</tspan></text>
  </g>

  <defs>
    <filter id="windowShadow" x="-120" y="-120" width="920" height="920" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
      <feDropShadow dx="0" dy="16" stdDeviation="18" flood-color="#000000" flood-opacity="0.18"/>
    </filter>
  </defs>
</svg>
